load("@cgrindel_bazel_starlib//bzlformat:defs.bzl", "bzlformat_pkg")
load("@bazel_skylib//rules:diff_test.bzl", "diff_test")
load("//markdown:defs.bzl", "markdown_generate_toc")

bzlformat_pkg(name = "bzlformat")

markdown_generate_toc(
    name = "structured_toc",
    srcs = ["structured.md"],
)

diff_test(
    name = "structured_toc_test",
    file1 = ":structured_toc",
    file2 = "expected_structured.md",
)

markdown_generate_toc(
    name = "structured_keep_toc_header_entry",
    srcs = ["structured.md"],
    remove_toc_header_entry = False,
)

diff_test(
    name = "structured_keep_toc_header_entry_test",
    file1 = ":structured_keep_toc_header_entry",
    file2 = "expected_structured_keep_toc_header_entry.md",
)
